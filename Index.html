<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spinning Wheel</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #fff;
  }
  #wheel-container {
    position: relative;
    width: 500px;
    height: 500px;
    margin: 50px auto;
  }
  #wheel {
    border-radius: 50%;
    border: 5px solid #555;
    transition: transform 4s ease-out;
  }
  #arrow {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 40px solid red;
    z-index: 10;
  }
  #spin-btn {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>Spinning Wheel</h1>

<div id="wheel-container">
  <div id="arrow"></div>
  <canvas id="wheel" width="500" height="500"></canvas>
</div>

<button id="spin-btn">SPIN</button>
<p id="result"></p>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const size = canvas.width;
const center = size / 2;
const slices = 8;
const sliceAngle = (2 * Math.PI) / slices;
const colors = ["#f36c6c", "#f7b733", "#fce77d", "#8ac926", "#1982c4", "#6a4c93", "#ff595e", "#ffca3a"];
const prizes = [
  { text: "50% off massage chair", imgSrc: "https://i.imgur.com/tfE5t.png" },
  { text: "8D Cinema Ride 50% off", imgSrc: "https://i.imgur.com/utD0e.png" },
  { text: "VR Cinema Ride 50% off", imgSrc: "https://i.imgur.com/xpQJe.png" },
  { text: "Your favourite food Rs 100/- off", imgSrc: "https://i.imgur.com/NlYVh.png" },
  { text: "Better luck next time", imgSrc: "https://i.imgur.com/ZG7Qn.png" },
  { text: "100 gift tickets", imgSrc: "https://i.imgur.com/jrvEt.png" },
  { text: "50 gift tickets", imgSrc: "https://i.imgur.com/jrvEt.png" },
  { text: "Your favourite food Cold Coffee + Veg Burger", imgSrc: "https://i.imgur.com/9j2oU.png" }
];

function drawWheel() {
  for (let i = 0; i < slices; i++) {
    // Draw slice
    ctx.beginPath();
    ctx.moveTo(center, center);
    ctx.fillStyle = colors[i];
    ctx.arc(center, center, center, i * sliceAngle, (i + 1) * sliceAngle);
    ctx.fill();
    ctx.save();

    // Draw text
    ctx.translate(center, center);
    ctx.rotate(i * sliceAngle + sliceAngle / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#000";
    ctx.font = "16px Arial";
    ctx.fillText(prizes[i].text, center - 10, 10);

    // Draw image
    const img = new Image();
    img.src = prizes[i].imgSrc;
    img.onload = () => {
      ctx.save();
      ctx.rotate(- (i * sliceAngle + sliceAngle / 2)); // reset rotation for image
      ctx.drawImage(img, -30, -center + 20, 50, 50);
      ctx.restore();
    };
    ctx.restore();
  }
}

let currentRotation = 0;
function spinWheel() {
  const spinAngle = Math.random() * 360 + 1800; // 5+ spins
  currentRotation += spinAngle;
  canvas.style.transform = `rotate(${currentRotation}deg)`;

  setTimeout(() => {
    const normalizedRotation = currentRotation % 360;
    const winningIndex = Math.floor((slices - (normalizedRotation / (360 / slices))) % slices);
    document.getElementById("result").textContent = `You won: ${prizes[winningIndex].text}`;
  }, 4200);
}

document.getElementById("spin-btn").addEventListener("click", spinWheel);

drawWheel();
</script>

</body>
</html>
