<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prize Wheel</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f0f0f0;
  }
  canvas {
    background: white;
    border-radius: 50%;
  }
  #arrow {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: red;
    clip-path: polygon(0 50%, 100% 0, 100% 100%);
  }
  button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h2>Spin the Wheel!</h2>
<div style="position:relative; display:inline-block;">
  <canvas id="wheelCanvas" width="500" height="500"></canvas>
  <div id="arrow"></div>
</div>
<br>
<button onclick="spinWheel()">Spin</button>

<script>
// ==========================
// EDIT THIS SECTION ONLY
// ==========================
const rewards = [
  { text: "Burger", image: "images/burger.png" },
  { text: "Pizza", image: "images/pizza.png" },
  { text: "Ice Cream", image: "images/icecream.png" },
  { text: "Fries", image: "images/fries.png" },
  { text: "Donut", image: "images/donut.png" },
  { text: "Hotdog", image: "images/hotdog.png" },
  { text: "Sandwich", image: "images/sandwich.png" },
  { text: "Taco", image: "images/taco.png" }
];
// ==========================

const canvas = document.getElementById("wheelCanvas");
const ctx = canvas.getContext("2d");
const numSlices = rewards.length;
const sliceAngle = (2 * Math.PI) / numSlices;
let currentAngle = 0;
let spinning = false;
let spinVelocity = 0;

function drawWheel() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const radius = canvas.width / 2;
  ctx.translate(radius, radius);
  ctx.rotate(currentAngle);

  for (let i = 0; i < numSlices; i++) {
    const startAngle = i * sliceAngle;
    const endAngle = startAngle + sliceAngle;

    // Draw slice
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.arc(0, 0, radius, startAngle, endAngle);
    ctx.fillStyle = i % 2 === 0 ? "#f9c74f" : "#90be6d";
    ctx.fill();
    ctx.stroke();

    // Draw image
    const img = new Image();
    img.src = rewards[i].image;
    ctx.save();
    ctx.rotate(startAngle + sliceAngle / 2);
    ctx.translate(radius * 0.65, 0);
    ctx.rotate(Math.PI / 2);
    img.onload = () => {
      ctx.drawImage(img, -30, -30, 60, 60);
    };
    ctx.restore();

    // Draw text
    ctx.save();
    ctx.rotate(startAngle + sliceAngle / 2);
    ctx.translate(radius * 0.45, 0);
    ctx.rotate(Math.PI / 2);
    ctx.fillStyle = "black";
    ctx.font = "14px Arial";
    ctx.textAlign = "center";
    ctx.fillText(rewards[i].text, 0, 35);
    ctx.restore();
  }

  ctx.rotate(-currentAngle);
  ctx.translate(-radius, -radius);
}

function spinWheel() {
  if (!spinning) {
    spinVelocity = Math.random() * 0.3 + 0.25; // initial spin speed
    spinning = true;
    animate();
  }
}

function animate() {
  if (spinning) {
    currentAngle += spinVelocity;
    spinVelocity *= 0.98; // slow down
    if (spinVelocity < 0.002) {
      spinning = false;
      spinVelocity = 0;
      declareWinner();
    }
  }
  drawWheel();
  requestAnimationFrame(animate);
}

function declareWinner() {
  const degrees = (currentAngle * 180 / Math.PI) % 360;
  const index = Math.floor((360 - degrees) / (360 / numSlices)) % numSlices;
  alert("You won: " + rewards[index].text + "!");
}

// Initial draw
drawWheel();
</script>

</body>
</html>
